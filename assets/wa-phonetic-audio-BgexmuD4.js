import{n as r}from"./index-DkZzrvLX.js";let s=!1,o=()=>{s=!0,document.removeEventListener("mousedown",o)};document.addEventListener("mousedown",o);function n(t){l(t)}function v(){n("//audio/handsup.wav")}function b(){n("//audio/right.wav")}let a=null;function l(t,i=()=>{}){if(!s){i(!0);return}const e=new Audio(t);a&&(a==null||a.pause(),a==null||a.remove()),a=e,e.onended=()=>{i(!0)},e.onerror=d=>{console.error(d),i(!1)},e.play()}const u={name:"WaPhoneticAudio",props:{phonetic:{type:String,default:""},word:{type:String,default:""},audioUrl:{type:String,default:""},disabled:{type:Boolean,default:!1}},data(){return{isPlaying:!1}},computed:{isAudioUnavailable(){return!this.word&&!this.audioUrl},realAudioUrl(){return this.audioUrl?this.audioUrl:this.word?`https://dict.youdao.com/dictvoice?type=1&audio=${encodeURIComponent(this.word)}`:""}},methods:{playAudio(){console.log("playAudio",this.disabled,this.isAudioUnavailable,this.realAudioUrl),!(this.disabled||this.isAudioUnavailable)&&(this.isPlaying=!0,l(this.realAudioUrl,()=>{this.isPlaying=!1,console.log("playAudio end",this.disabled,this.isAudioUnavailable)}))}}};var c=function(){var i=this,e=i._self._c;return e("div",{directives:[{name:"test",rawName:"v-test"}],staticClass:"wa-phonetic-audio",class:{disabled:i.isAudioUnavailable},on:{click:i.playAudio}},[e("span",{staticClass:"phonetic-text"},[i._v(i._s(i.phonetic))]),e("button",{staticClass:"audio-btn",class:{"is-playing":i.isPlaying},attrs:{disabled:i.isAudioUnavailable||i.disabled,title:i.isAudioUnavailable?"暂无发音":"播放发音"}},[e("svg",{staticStyle:{"font-size":"20px"},attrs:{viewBox:"0 0 24 24",width:"1em",height:"1em"}},[e("path",{attrs:{d:"M3 10v4h4l5 5V5L7 10H3zm13.5 2c0-1.77-1.02-3.29-2.5-4.03v8.06c1.48-.74 2.5-2.26 2.5-4.03z",fill:i.isAudioUnavailable||i.disabled?"#bbb":"#3578e5"}})]),e("span",{staticClass:"ripple"})])])},p=[],h=r(u,c,p,!1,null,"1fb5056b");const m=h.exports;export{m as W,b as a,v as p};
