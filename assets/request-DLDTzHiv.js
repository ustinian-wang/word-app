import{t as i,p as u}from"./index-Bwr9syQ3.js";import{$ as n}from"./toast-DkpKqXYP.js";function c(t){const e=new Date;e.setDate(e.getDate()+7),localStorage.setItem("token",t),document.cookie=`token=${t}; expires=${e.toUTCString()}; path=/; secure; samesite=strict`}function l(){var t,e,s,a;return localStorage.getItem("token")||((a=(s=(e=(t=document.cookie)==null?void 0:t.split("; "))==null?void 0:e.find(o=>o.startsWith("token=")))==null?void 0:s.split("="))==null?void 0:a[1])||null}let r=i();r.defaults.baseURL=void 0;r.defaults.timeout=6e4;r.defaults.withCredentials=!0;r.interceptors.request.use(t=>{let e=l();return e&&(t.headers=t.headers||{},t.headers.Authorization="Bearer "+e),t});r.interceptors.response.use(t=>t&&t.data&&t.data.rt===401?(u.push("/login"),n.error(t.data.msg||"请登录"),Promise.reject({isCustom401:!0,response:t})):t);export{r,c as s};
